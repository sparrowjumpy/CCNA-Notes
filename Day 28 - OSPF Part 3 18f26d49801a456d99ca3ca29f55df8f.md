# Day 28 - OSPF Part 3

Reviewed: No

### **1. Loopback Interfaces:**

- **Overview:**
    - A **loopback interface** is a virtual, software-based interface on a router.
    - It is always in the up/up state unless manually shut down.
    - Loopback interfaces provide a stable IP address that can be used to identify and reach the router, even if physical interfaces fail.

### **2. OSPF Network Types:**

- **Broadcast Network Type:**
    - Enabled by default on Ethernet and FDDI interfaces.
    - Routers dynamically discover neighbors using the multicast address **224.0.0.5**.
    - **DR (Designated Router)** and **BDR (Backup Designated Router)** elections are required on each subnet.
    - Routers that are neither DR nor BDR become **DROther**.
- **DR/BDR Election Process:**
    - **Priority:** The router with the highest OSPF interface priority becomes the DR. The default priority is 1.
    - **Router ID:** If priorities are equal, the router with the highest Router ID becomes the DR.
    - The election is **non-preemptive**: Once a DR/BDR is elected, it remains in that role until OSPF is reset or the interface goes down.
- **Point-to-Point Network Type:**
    - Enabled by default on serial interfaces using PPP (Point-to-Point Protocol) or HDLC (High-Level Data Link Control) encapsulations.
    - No DR/BDR elections are held because the connection is between just two routers.
    - Routers form a full adjacency with each other.
- **Serial Connections Overview:**
    - **DCE (Data Communications Equipment):** The side that sets the clock rate for the connection.
    - **DTE (Data Terminal Equipment):** The receiving side of the clock rate.
    - Default encapsulation is **HDLC** (Cisco HDLC in Cisco devices).
    - **Command for clock rate:** `clock rate <value>` (in bits per second) on the DCE side.
- **Manually Configuring Network Types:**
    - **Command:** `ip ospf network <network-type>` (in interface configuration mode).
    - Not all network types are compatible with all link types (e.g., serial links cannot use the broadcast network type).

### **3. OSPF Neighbor and Adjacency Requirements:**

- **Area Number Must Match:** Both routers must be in the same area to become neighbors.
- **Subnet Must Match:** Routersâ€™ interfaces must be in the same subnet.
- **OSPF Process Must Be Active:** The OSPF process must not be in the shutdown state.
- **Unique Router IDs:** Router IDs must be unique across the OSPF domain.
- **Hello and Dead Timers Must Match:** These timers must be consistent between neighbors.
- **Authentication Settings:** OSPF passwords and authentication settings must match.
- **IP MTU Must Match:** Maximum Transmission Unit (MTU) settings on interfaces must match for proper OSPF operation.
- **Network Type Must Match:** The OSPF network type configuration must be consistent between neighbors.

### **4. OSPF LSA Types:**

- **Type 1 - Router LSA:**
    - Generated by every OSPF router.
    - Identifies the router and lists the networks connected to the router's OSPF-activated interfaces.
- **Type 2 - Network LSA:**
    - Generated by the DR of each multi-access network (e.g., Ethernet networks using the broadcast network type).
    - Lists all routers attached to the multi-access network.
- **Type 5 - AS-External LSA:**
    - Generated by Autonomous System Boundary Routers (ASBRs).
    - Describes routes to destinations outside the OSPF domain (e.g., routes to the internet).

### **5. Quiz Review:**

- **Point-to-Point Network Type Characteristic:**
    - **Answer:** DR and BDR elections are not held.
- **Full Adjacencies in OSPF Broadcast Network:**
    - **Answer:** The DR forms a full adjacency with all neighbors in the broadcast network segment.
- **OSPF Neighbor Requirements:**
    - **Answers:** Hello and Dead timers must match, and interfaces must be in the same area.
- **Type 2 LSA:**
    - **Answer:** Generated only by the DR of a multi-access network, such as the broadcast network type.
- **Priority and DR Election:**
    - **Answers:** The DR and BDR of the network are unchanged; if the current DR goes down, R1 will become the BDR

### **6. Commands used:**

Configure OSPF on an Interface:

`ip ospf <process-id> area <area-id>`

Change OSPF Interface Priority:

`ip ospf priority <value>`

Reset the OSPF Process:

`clear ip ospf process`

Configure Serial Interface Clock Rate:

`clock rate <bits-per-second>`

Change Serial Interface Encapsulation to PPP:

`encapsulation ppp`

Check Serial Interface Controller (to see if it's DCE or DTE):

`show controllers <interface-id>`

Configure OSPF Network Type:

`ip ospf network <network-type>`

Configure OSPF Hello Interval:

`ip ospf hello-interval <seconds>`

Configure OSPF Dead Interval:

`ip ospf dead-interval <seconds>`

Configure OSPF Authentication Key:

`ip ospf authentication-key <password>`

Enable OSPF Authentication:

`ip ospf authentication`

Configure IP MTU:

`ip mtu <bytes>`

Disable OSPF Process:

`shutdown` (in OSPF configuration mode)

Re-enable OSPF Process:

`no shutdown` (in OSPF configuration mode)